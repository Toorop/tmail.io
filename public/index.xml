<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>tmail</title>
    <link>http://localhost:1313/</link>
    <description>Recent content on tmail</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>fr-fr</language>
    
    
    
    <lastBuildDate>Wed, 28 Jan 2015 09:15:12 &#43;0100</lastBuildDate>
    <atom:link href="http://localhost:1313/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Gestion des routes SMTP en utilisant le CLI</title>
      <link>http://localhost:1313/doc/cli-gestion-route-smtp/</link>
      <pubDate>Wed, 28 Jan 2015 09:15:12 &#43;0100</pubDate>
      
      <guid>http://localhost:1313/doc/cli-gestion-route-smtp/</guid>
      <description>

&lt;p&gt;Vous pouvez gérer les routes SMTP sortantes directement en ligne de commande, ce document vous donne les références concernant les fonctinnalités implémentées.&lt;/p&gt;

&lt;p&gt;Avant d&amp;rsquo;aller plus loin je vous recommande la lecture de la &lt;a href=&#34;doc/routes-smtp-sortantes/&#34;&gt;documentation expliquant le fonctionnement des routes SMTP&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&#34;lister-toutes-les-routes:253091a785f27e2f20aac978da09c51f&#34;&gt;Lister toutes les routes&lt;/h3&gt;

&lt;p&gt;La commande pour lister les routes est:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;tmail routes list
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Pour le moment il n&amp;rsquo;y a pas de paramétres pour spécifier des critéres de recherche. Si vous avez besoin de rechercher une route le plus simple pour le moment est d&amp;rsquo;utiliser l&amp;rsquo;outil &lt;em&gt;grep&lt;/em&gt; pour filtrer la sortie de la commande &lt;em&gt;tmail routes list&lt;/em&gt;.&lt;br /&gt;
Par exemple si vous voulez chercher les routes faisant référence au domaine tmail.io :&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;tmail routes list | grep tmail.io
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;ajouter-une-régle-de-routage-smtp:253091a785f27e2f20aac978da09c51f&#34;&gt;Ajouter une régle de routage SMTP&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;tmail routes add -h HOST -r DESTINATION_HOST
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;exmples:253091a785f27e2f20aac978da09c51f&#34;&gt;Exmples&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;tmail route add -h tmail.io -r mail.tmail.io -p 2525
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;supprimer-une-régle-de-routage-smtp:253091a785f27e2f20aac978da09c51f&#34;&gt;Supprimer une régle de routage SMTP&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;tmail routes del ROUTE_ID
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>Gestion de la queue en utilisant le CLI</title>
      <link>http://localhost:1313/doc/cli-gestion-queue/</link>
      <pubDate>Wed, 21 Jan 2015 14:20:24 &#43;0100</pubDate>
      
      <guid>http://localhost:1313/doc/cli-gestion-queue/</guid>
      <description>

&lt;h4 id=&#34;lister-les-messages-en-queue:a5ae8842e5f4cb42bab09bbc9c21cead&#34;&gt;Lister les messages en queue&lt;/h4&gt;

&lt;p&gt;La commande pour lister les messages en queue est:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;tmail queue list
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Pour chaque mail en queue les informations suivantes sont retournées:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Identifiant du mail en queue&lt;/li&gt;
&lt;li&gt;From: expéditeur du mail&lt;/li&gt;
&lt;li&gt;To:  destinataire du mail&lt;/li&gt;
&lt;li&gt;Status: status du mail. Actuellement les status sont &amp;ldquo;Delivery in progress&amp;rdquo;, &amp;ldquo;Scheduled&amp;rdquo;, &amp;ldquo;Will be discarded&amp;rdquo;, &amp;ldquo;Will be bounced&amp;rdquo;&lt;/li&gt;
&lt;li&gt;Next delivery process scheduled at: Dans le cas ou un mail est en attente dans la queue ce paramètre indique le moment (approximatif) où le mail sera représenté au process tmail qui traite les message en queue.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Cas où il n&amp;rsquo;y a pas de message en queue:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;tmail queue list

There is no message in queue.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Cas où il y a un message en queue qui est en train d&amp;rsquo;être délivré:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;tmail queue list

1 messages in queue.

12564 - From: toorop@toorop.fr - To: toorop@toorop.fr - Status: Delivery in progress - Added: 2015-01-23 09:10:40.271449372 +0100 CET 
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Cas où il y un message en queue en attente:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;1 messages in queue.
12564 - From: toorop@toorop.fr - To: toorop@toorop.fr - Status: Scheduled - Added: 2015-01-23 09:10:40.271449372 +0100 CET - Next delivery process scheduled at: 2015-01-23 09:14:40.464895229 +0100 CET
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;supprimer-un-message-discard:a5ae8842e5f4cb42bab09bbc9c21cead&#34;&gt;Supprimer un message (discard)&lt;/h4&gt;

&lt;p&gt;La commande suivante va vous permettre de supprimer un message de la queue:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;tmail discard MESSAGE_ID
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Attention le mail ne sera pas supprimé instantanément, il le sera lorsqu&amp;rsquo;il sera présenté à tmail pour être traité.&lt;/p&gt;

&lt;p&gt;Dans la mesure du possible il est préférable de bouncer un mail plutôt que de le supprimer pour que l&amp;rsquo;expéditeur soit informé du fait que son mail n&amp;rsquo;a pas abouti.&lt;/p&gt;

&lt;h4 id=&#34;bouncer-un-message:a5ae8842e5f4cb42bab09bbc9c21cead&#34;&gt;Bouncer un message&lt;/h4&gt;

&lt;p&gt;Bouncer un message consiste à le supprimer de la queue et à envoyer un message à l&amp;rsquo;expéditeur pour l&amp;rsquo;informer que son mail n&amp;rsquo;est pas arrivé à destination.&lt;/p&gt;

&lt;p&gt;La commande pour bouncer un mail est:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    tmail bounce MESSAGE_ID
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Comme pour la commande discard, le bounce n&amp;rsquo;est pas instantané il se fera lorsque le mail sera représenté à tmail pour être délivré.&lt;/p&gt;

&lt;h4 id=&#34;relancer-la-queue-flush:a5ae8842e5f4cb42bab09bbc9c21cead&#34;&gt;Relancer la queue (flush)&lt;/h4&gt;

&lt;p&gt;Pour le moment cette commande n&amp;rsquo;est pas implémentée. En attendant, pour relancer la queue il vous suffit de relancer tmail.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Routes smtp sortantes</title>
      <link>http://localhost:1313/doc/routes-smtp-sortantes/</link>
      <pubDate>Mon, 19 Jan 2015 16:38:23 &#43;0100</pubDate>
      
      <guid>http://localhost:1313/doc/routes-smtp-sortantes/</guid>
      <description>

&lt;p&gt;&lt;strong&gt;tmail vous permet de spécifier des routes sortantes pour les mails qu&amp;rsquo;il a à expédier.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Par défaut, lorsque tmail doit transmettre un mail il va faire une requête DNS MX pour obtenir les adresses IP du/des serveur(s) SMTP du domaine de destination. C&amp;rsquo;est le fonctionnement classique d&amp;rsquo;un serveur SMTP, mais vous pouvez aussi créer des règles de routage pour forcer les connexions sortantes vers des relais spécifiques.&lt;/p&gt;

&lt;p&gt;Les règles de routage vont êtres définies an fonction des paramètres suivants :&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Le domaine de destination.&lt;/li&gt;
&lt;li&gt;L&amp;rsquo;expéditeur à la condition que le mail ait été originalement transmis à tmail par un utilisateur authentifié (via SMTP AUTH).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Lorsque tmail à un mail à transmettre il va chercher parmi les règles suivantes si il y en a une qui correspond.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Si il trouve une règle&lt;/strong&gt;, il va utiliser les routes qui correspondent à cette règle. Chaque route à un poids, comme pour les MX classiques, tmail va donc essayer en premier lieu de se connecter au relais suivant en utilisant la route qui a le poids le plus faible. Dans le cas où plusieurs routes ont le même poids, il va les ordonner aléatoirement ce qui va permettre de faire facilement du round-robin.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;Si il n&amp;rsquo;en trouve pas&lt;/strong&gt;, il va utiliser les MX du domaine de destination.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Les règles sont testées dans l&amp;rsquo;ordre suivant:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Si le mail à été transmis via SMTPAUTH:&lt;/strong&gt; tmail va chercher une règle liée à l&amp;rsquo;utilisateur authentifié qui correspond à l&amp;rsquo;expéditeur (MAIL FROM de l’enveloppe SMTP) et au domaine de destination.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;Si le mail à été transmis via SMTPAUTH:&lt;/strong&gt; tmail va chercher une règle liée à l&amp;rsquo;utilisateur authentifié qui correspond au domaine de l&amp;rsquo;expéditeur (MAIL FROM de l’enveloppe SMTP) et au domaine de destination.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;Si le mail à été transmis via SMTPAUTH:&lt;/strong&gt; tmail va chercher une règle liée à l&amp;rsquo;utilisateur authentifié qui correspond au domaine de destination.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;Si le mail à été transmis via SMTPAUTH:&lt;/strong&gt; tmail va chercher une règle &amp;lsquo;générique&amp;rsquo; liée à l&amp;rsquo;utilisateur authentifié.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;tmail va chercher une règle qui correspond au domaine de destination.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;tmail va chercher une règle par défaut (wildcard &amp;ldquo;*&amp;rdquo; sur le domaine de destination)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Par &lt;em&gt;règle liée à l&amp;rsquo;utilisateur authentifié&lt;/em&gt; j&amp;rsquo;entends une règle lié au login complet de cet utilisateur, ou si il n&amp;rsquo;y en a pas et que ce login est de la forme user@domaine.tld un règle lié à domaine.tld&lt;/p&gt;

&lt;h4 id=&#34;a-venir-création-des-règles-de-routage:5e9d67da96eda8e125d0b466af0f081e&#34;&gt;A venir: Création des règles de routage&lt;/h4&gt;
</description>
    </item>
    
    <item>
      <title>FAQ</title>
      <link>http://localhost:1313/faq/</link>
      <pubDate>Wed, 14 Jan 2015 14:14:40 &#43;0100</pubDate>
      
      <guid>http://localhost:1313/faq/</guid>
      <description>

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#tmail:4a1318da06786ac52626178ca960109e&#34;&gt;Qu&amp;rsquo;est ce que tmail ? &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#opensource:4a1318da06786ac52626178ca960109e&#34;&gt;Est ce que tmail est opensource ? &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#tester-tmail:4a1318da06786ac52626178ca960109e&#34;&gt;Peut on tester tmail ? &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#golang-tmail:4a1318da06786ac52626178ca960109e&#34;&gt;tmail est codé en quel langage ? &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;tmail:4a1318da06786ac52626178ca960109e&#34;&gt;Qu&amp;rsquo;est ce que tmail ?&lt;/h2&gt;

&lt;p&gt;Réponse courte: tmail est un serveur &lt;a href=&#34;http://fr.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol&#34;&gt;SMTP&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Mais pourquoi créer un nouveau serveur smtp !?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Oui c&amp;rsquo;est vrai ça pourquoi créer un nouveau serveur SMTP alors qu&amp;rsquo;il existe déjà qmail, postfix, exim, sendmail, .. ?&lt;br /&gt;
Parce que :&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Ces serveurs ont été conçu à une époque où les problématiques et donc les besoins liés à l’émail étaient différents. Je pense en particulier à la problématique du spam, aujourd&amp;rsquo;hui il est indispensable de filtrer ce qui entre et ce qui sort d&amp;rsquo;un serveur SMTP, d&amp;rsquo;établir de règles strictes quant à l&amp;rsquo;usage du service: par exemple l&amp;rsquo;user X ne peux envoyer plus de x mails par jour, chaque mail ne doit pas faire plus de x Mo et il ne peut utiliser le service le week-end ou encore de pas envoyer plus de x mails par minute vers telle destination&amp;hellip;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Avoir un système fiable et parfaitement redondant nécessite pas mal de compromis.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;La scalabilité apportée par les solutions actuelles n&amp;rsquo;est pas simple à mettre en place et est difficilement linéaire.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Plus globalement, la mise en place et l&amp;rsquo;administration de ces serveurs n&amp;rsquo;est pas forcement simple non plus. Attention le but n&amp;rsquo;est pas de permettre à n&amp;rsquo;importe qui ne mettre en place un service SMTP, mais plutôt de libérer les sysadmins de contraintes inutiles.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Enfin ça fait des années que je travaille dans ce secteur (pour &lt;a href=&#34;http://protecmail.com/&#34; target=&#34;_blank&#34; title=&#34;Protection de messagerie&#34;&gt;Protecmail&lt;/a&gt;) et ça fait presque aussi longtemps que je me dis:&lt;br /&gt;
&lt;em&gt;Un jour je coderais mon propre serveur&lt;/em&gt; ;)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;opensource:4a1318da06786ac52626178ca960109e&#34;&gt;Est ce que tmail est opensource ?&lt;/h2&gt;

&lt;p&gt;Pour le moment je ne souhaite pas &amp;ldquo;libérer&amp;rdquo; les sources, mais à terme ce sera le cas.&lt;/p&gt;

&lt;p&gt;La raison principale est que le projet est trop jeune, je préfère attendre que les grandes lignes soient posées, que ce que j&amp;rsquo;ai prévu soit implémenté - au moins en partie - pour éviter d&amp;rsquo;une part trop de dispersions et d&amp;rsquo;autre part pour pouvoir concentrer mon temps disponible au code plutôt qu&amp;rsquo;à la gestion du projet.&lt;/p&gt;

&lt;h2 id=&#34;tester-tmail:4a1318da06786ac52626178ca960109e&#34;&gt;Peut on tester tmail ?&lt;/h2&gt;

&lt;p&gt;Même si il n&amp;rsquo;est pas - encore - open source, je vais mettre à disposition des binaires et la documentation pour permettre à ceux qui le désire de tester tmail.&lt;br /&gt;
Bien entendu les versions proposées en test, seront des versions de dev qui implémenteront que.. ce qui est implémenté et qui ne seront pas exemptes de bugs.&lt;/p&gt;

&lt;h2 id=&#34;golang-tmail:4a1318da06786ac52626178ca960109e&#34;&gt;tmail est codé en quel langage ?&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;http://golang.org/&#34; target=&#34;_blank&#34; title=&#34;golang&#34;&gt;Go&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>